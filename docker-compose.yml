version: '3.8'

services:
  openclaw:
    image: openclaw/agent:latest
    container_name: openclaw
    restart: unless-stopped
    user: "1000:1000"
    environment:
      - OPENCLAW_DISCORD_TOKEN=${OPENCLAW_DISCORD_TOKEN}
      - HOME=/app
    volumes:
      - /home/openclaw/data/obsidian-vault:/app/vaults/obsidian:rw
      - /home/openclaw/data/anki-data:/app/data/anki:rw
      - /home/openclaw/data/workspace:/app/workspace:rw
      - /home/openclaw/data/calendar:/app/data/calendar:rw
      - /home/openclaw/.openclaw:/app/.openclaw:ro
    networks:
      - openclaw-net
    deploy:
      resources:
        limits:
          cpus: '2.0'
          memory: 2G
        reservations:
          cpus: '0.5'
          memory: 512M

networks:
  openclaw-net:
    driver: bridge
